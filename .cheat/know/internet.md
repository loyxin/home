# 题目 22
TCP 协议中的 ESTABLEISHED 状态是什么状况？
* 服务器端处于监听状态
* 服务器接受 SYN 报文，建立 TCP 连接时的三次握手会话过程中的一个中间状态
* 连接已经建立状态
* 初始状态

### 正确答案及解析
答案：C
* `CLOSED`: 表示初始状态。
* `LISTEN`: 表示服务器端的某个 SOCKET 处于监听状态，可以接受连接。
* `SYN_RCVD`: 这个状态表示接受到了SYN报文，在正常情况下，这个状态是服务器端的SOCKET在建立TCP连接时的三次握手会话过程中的一个中间状态，很短暂，基本上用 netstat 你是很难看到这种状态的，除非你特意写了一个客户端测试程序，故意将三次 TCP 握手过程中最后一个 ACK 报文不予发送。因此这种状态时，当收到客户端的 ACK 报文后，它会进入到 ESTABLISHED 状态。
* `SYN_SENT`: 这个状态与 `SYN_RCVD` 遥相呼应，当客户端 SOCKET 执行 CONNECT 连接时，它首先发送 SYN 报文，因此也随即它会进入到了 `SYN_SENT` 状态，并等待服务端的发送三次握手中的第2个报文。`SYN_SENT` 状态表示客户端已发送SYN报文。
* `ESTABLISHED`：表示连接已经建立。
* `FIN_WAIT_1`: `FIN_WAIT_1` 和 `FIN_WAIT_2` 状态的真正含义都是表示等待对方的 FIN 报文。而这两种状态的区别是：`FIN_WAIT_1` 状态实际上是当 SOCKET 在 ESTABLISHED 状态时，它想主动关闭连接，向对方发送了 FIN 报文，此时该 SOCKET 即进入到 `FIN_WAIT_1` 状态。而当对方回应 ACK 报文后，则进入到 `FIN_WAIT_2` 状态，当然在实际的正常情况下，无论对方何种情况下，都应该马上回应 ACK 报文，所以 `FIN_WAIT_1` 状态一般是比较难见到的，而 `FIN_WAIT_2` 状态还有时常常可以用netstat看到。
* `FIN_WAIT_2`：`FIN_WAIT_2` 状态下的 SOCKET，表示半连接，也即有一方要求 close 连接，但另外还告诉对方，还有数据需要传送，稍后再关闭连接。
* `TIME_WAIT`: 表示收到了对方的 FIN 报文，并发送出了 ACK 报文，就等 2MSL 后即可回到 CLOSED 可用状态了。如果 `FIN_WAIT_1` 状态下，收到了对方同时带 FIN 标志和 ACK 标志的报文时，可以直接进入到 `TIME_WAIT` 状态，而无须经过 `FIN_WAIT_2` 状态。
* `CLOSING`: 属于一种比较罕见的例外状态。正常情况下，当你发送 FIN 报文后，按理来说是应该先收到（或同时收到）对方的 ACK 报文，再收到对方的 FIN 报文。但是 CLOSING 状态表示你发送 FIN 报文后，并没有收到对方的 ACK 报文，反而却也收到了对方的 FIN 报文。
* `CLOSE_WAIT`: 这种状态的含义表示在等待关闭。当对方 close 一个 SOCKET 后发送 FIN 报文，你系统毫无疑问地会回应一个 ACK 报文给对方，此时则进入到 `CLOSE_WAIT` 状态。
* `LAST_ACK`: 它是被动关闭一方在发送 FIN 报文后，最后等待对方的 ACK 报文。当收到 ACK 报文后，也即可以进入到 CLOSED 可用状态了。



# 题目 51
对于IP地址130.63.160.2，MASK为255.255.255.0，子网号为（）
* 160.2
* 160
* 63.160
* 130.63.160

### 正确答案及解析
答案：B

130.63.160.2是B类IP地址

B类IP地址前16位（两个字节）为网络号，后16位是主机号
A类地址 网络号占8位，主机号占24位。前1位为0
B类地址 网络号占16位，主机号占16位 前2位是10
C类地址 网络号占24位，主机号占8位  前3位是110
划分子网就是将主机号中的一部分拿出来当做子网号

这里子网掩码为255.255.255.0也就是把前三个字节当成了网络号

与B类IP默认的前两个字节作为网络号相比，第三个字节就是子网号，就是160

所以这个ip的网络号是130.63 子网号是 160 主机号是2


# 题目 75
某IP地址192.168.48.10，掩码为255.255.255.128，其所在的子网为()，广播地址为()，有效的主机IP地址范围从()到().

### 正确答案及解析
答案：192.168.48.0/192.168.48.127/192.168.48.1  到 192.168.48.126

255转换为2进制是 11111111

128转换为2进制是 10000000

对地址 192.168.48.10和掩码255.255.255.128 进行 and操作 得到 子网  192.168.48.0

ip地址和掩码做and操作后， 得到这个子网地址的都属于这个ip段， 192.168.48.0 ... 192.168.48.127和 255.255.255.128进行and操作后都是 192.168.48.0

其中， 192.168.48.127为广播地址，  192.168.48.0 ... 192.168.48.126为有效地址



## net
最大传输单元 MTU 默认 1500 IP 包最大的大小

TX RX
errors dropped overruns carrier collision
errors : 错误的数据包数量 校验错误，帧同步错误
dropped 丢包
overruns 超限数据包数量 网路i/o过快 数据来不及处理的丢包
